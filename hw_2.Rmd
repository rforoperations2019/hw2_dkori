---
title: "Rshiny Homework 2"
author: "Devraj Kori"
date: "10/3/2019"
output: html_document
---


```{r setup, include=FALSE}
rm(list=ls())
knitr::opts_chunk$set(echo = TRUE)
library(rmarkdown)
library(knitr)
library(dplyr)
library(tidyr)
library(ggplot2)
require(readxl)
require(openxlsx)
require(reshape2)
require(scales)
require(gridExtra)
library(tidycensus)
#for QWI
library(httr)
library(jsonlite)
library(readr)
library(leaflet)
library(sf)
library(rgdal)
```

```{r load_variables}
#load the available variables from acs 2017, to find an interesting one
v17<-load_variables(2017,"acs5", cache=TRUE)

```

```{r load_geo_files}
#pull median household income at the tract level from ACS as polygons
alle_income<-get_acs(variables=c(Median_hh_income="B06011_001"),
                     state="PA",
                     county="Allegheny",
                     geography="tract",
                     year=2017,
                     geometry=TRUE)
#list.files()
#read in cell tower points
cell_towers<-readOGR('Allegheny_County_Cell_Tower_Points.geojson')
#read in snow route centerlines
snow_routes<-readOGR('Allegheny_County_Snow_Route_Centerlines_20162017.geojson')

```

```{r create_map}
#create icons object
icons <- awesomeIconList(
  Towers = makeAwesomeIcon(icon = "fa-signal", library = "fa", markerColor = "blue")
  )

#create map with all 3 layers, layer selector, basemap selector
leaflet()%>%
  addProviderTiles(provider = "CartoDB.Positron", group = "Positron")%>%
  addProviderTiles(providers$Thunderforest, group = "ThunderForest")%>%
  addAwesomeMarkers(data=cell_towers,icon=icons["Towers"])%>%
  addLayersControl(
    baseGroups = c("Positron","ThunderForest"),
    #overlayGroups = c("Quakes", "Outline"),
    options = layersControlOptions(collapsed = FALSE))
  

```